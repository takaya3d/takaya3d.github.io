<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"  content="GLTFのモデルをDRACO圧縮してWebで表示しよう!">
    <meta name="keywords"  content="GLB圧縮,GLTF圧縮,Draco圧縮,DracoLoader,Threejs,Three.js,TKStudio">
    <link rel="apple-touch-icon-precomposed" href="https://tkstudio.jp/img/Im15.jpg" />
    <meta property="article:published_time" content="2023-02-20T21:00:27+00:00">
    <meta property="article:modified_time" content="2023-2-20T23:04:11+00:00">

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YLB4DQ21FR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-YLB4DQ21FR');
  </script>
    
    <title>GLTFのモデルをDRACO圧縮してWebで表示しよう!</title>
    <!-- IE用 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="icon" href="./img/TKIcon.png">


    <!--Twitter Card-->
    <meta name=”twitter:card” content=”summary_large_image” />
    <meta name=”twitter:site” content=”@takayahirat”/>
    <meta name=”twitter:domain” content=”tkstudio.jp/Blogs/post4/index.html” />
    <meta property="og:title"  content=”Threejsでかわいい飛行機とコントレイルを作ってみた!” />
    <meta property=”og:description” content=”今回、上の方で表示させているモデルはBlender出力時が4.9MBで、Draco圧縮をかけたモデルが3.6MBになっています。 […]” />
    <meta property="og:image" content=”https://tkstudio.jp/img/Im15.jpg” />

    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/tomorrow-night-blue.min.css">
    

  <script type="module" crossorigin src="./assets/index-6e79c372.js"></script>
  <link rel="stylesheet" href="./assets/index-5074204b.css">
</head>
<body>

    
    <!-- Splash -->
    <div id="splash">
        <div id="splash_innertext">読み込み中です! しばらくお待ちください。</div>
        <div id="splash_text"></div>
    </div> 
  
  
  
  
  
  
    <!-- Navigation -->
    <nav id="nav">
        <img src="./img/TKIcon.png" alt="">
        <div class="navigation">
            <ul>
                <i id="menu-close" class="fas fa-times"></i>
                <li><a href="../../index.html">トップ</a></li>
                <li><a href="../../Sub&Blog/subPage.html">サービス</a></li>
                <li><a href="../../ConceptPort/PortFolio.html">ポートフォリオ</a></li>
                <li><a href="../../Sub&Blog/blog.html">ブログ</a></li>
                <li><a href="../../Game/2023:02/index.html">月替りゲーム</a></li>
                <li><a href="../../ContactForm/Contact.php">お問い合わせ</a></li>
            </ul>
            <img id="menu-btn" src="./img/menu.png" alt="メニューボタン">
        </div>
    </nav>
  
  
  
      
    <div id="world">
      
    </div>
    <div id="credits">
        <h1>GLTFのモデルをDRACO圧縮してWebで表示しよう!</h1>
    <!-- コードの掲載 -->
    
  
    
  
  
    <div id="particles-js"></div>
      
  
  
  
  
      <!-- Home -->
      <section id="blog-container">
          <div class="blogs blogpost">
              <div class="post">
  
  
                  <!-- <img src="./img/01.jpg" alt=""> -->
                  <div class="balloon-009">
                    <img src="./img/TKStudio代表のアイコン.png" class="character" alt="TKStudio代表のアイコン"/>
                    <p>みなさんこんにちは。Takayaです。<br>
                      上の3Dモデルは、Draco圧縮をかけてから表示しています。
                    </p>
                  </div>
                  <p>Threejsでモデルを表示させる際に、一番気を使うのが、<span class="marker2">ファイルの大きさ</span>ですよね。<br>
                    今回、上の方で表示させているモデルはBlender出力時が4.9MBで、Draco圧縮をかけたモデルが3.6MBになっています。<br>
                    ご覧の通り、見た目に関しては、ほとんど影響がないので安心して使えます。
                    <img src="./img/Draco圧縮による見た目の変化.jpg" alt="Draco圧縮による見た目の変化"/>
                  </p>
                  

  
                      <!-- <div class="toc-002">
                        <div>
                            目次
                        </div>
                        <ol>
                            <li>Three.jsの文法チェックをもう一度してみる。
                              <ol>
                                <li>Three.js文法エラー</li>
                                <li>ライブラリの読み込みをチェック</li>
                                <li>JavaScriptのスコープの問題</li>
                              </ol>
                            </li>
                            <li>Three.jsの互換性の問題
                                <ol>
                                  <li>Three.jsのVerの問題</li>
                                  <li>ライブラリの互換性の問題</li>
                                  <li>ブラウザを変えてみる</li>
                                </ol>
                            </li>
                            <li>あとがき</li>
                        </ol>
                    </div> -->
  

  
  

                      <hr><span class="sub_title"><h2>nodejs経由でDraco圧縮を行う方法</h2></span><hr>
  
                      <div class="balloon-009">
                        <img src="./img/TKStudio代表のアイコン.png" class="character" alt="TKStudio代表のアイコン"/>
                        <p><span class="marker2">Nodejsをインストールしてから初めてね!</span></p>
                      </div>
                      <hr><h3>gltf-pipelineをインストール</h3><hr>
                      <pre class="cording">
                        <code>
npm install -g gltf-pipeline
                        </code>
                      </pre>
                      <p>gltf-pipelineは、npm経由でダウンロードすることができるDRACO圧縮に必要なツールです。<br>
                        MacOSの方は、gltf-pipelineのパスを通す必要があります。<br>
                        vimから、zshrcファイルを編集します。
                        <pre class="cording">
                          <code>
vim ~/.zshrc
                          </code>
                          <code>
export PATH=$HOME/~~~
                          </code>
                        </pre>
                        zshrcに、gltf-pipelineをインストールした場所(~~~)の部分を記述してください。
                      </p>
                      
                      <hr><h3>gltf-pipelineでDraco圧縮を行う。</h3><hr>
                      <p>上記で、nodejsからDraco圧縮を行う準備ができたので、実際に行なっていきます。<br>
                        まずは、<span class="marker2">npmの階層を圧縮したいモデルが入っているフォルダに移動</span>してください。<br>
                        そして下記のコードを打ちます。
                      </p>
                      <pre class="cording language-shell">
                        <code>
gltf-pipeline -i [圧縮前のファイル名].gltf -o [圧縮後のファイル名].gltf -d
                        </code>
                      </pre>
                      <p>完了しました。これで圧縮されたモデルが出力されるはずです！</p>


                      <hr><h3>DracoLoaderを用いてWeb上で表示</h3><hr>
                      <p>GLTFLoaderと、DRACOLoaderを用いて3DModelをインポートします!</p>
                      <pre class="cording language-javascript">
                        <code>
      // 飛行機を出力
  
      class ExportModel {
        constructor() {
            this.mesh = new THREE.Object3D();
    
            const dracoLoader = new DRACOLoader()
            dracoLoader.setDecoderPath('/draco/')
    
            const gltfLoader = new GLTFLoader()
            gltfLoader.setDRACOLoader(dracoLoader)
            gltfLoader.load(
                '/models/glTF-BirdPlane/BirdPlaneDraco.glb',
                (gltf) => {
                    gltf.scene.scale.set(350, 350, 350)
                    this.mesh.add(gltf.scene);
                    mixer = new THREE.AnimationMixer(gltf.scene)
                    const action = mixer.clipAction(gltf.animations[0])
                    action.play()
                }
            )
        }
    }
                        <div></div>
                        </code>
                      </pre>

                      <p>
                        OBJや、FBX経由でロードするよりはるかに使い勝手が良いのがGLTFの特徴です。
                        DRACO圧縮をすると、さらにWebページの読み込み速度が早まるのでぜひ試してみてください!
                      </p>




                    
                      <h4>Youtubeに制作過程をあげています</h4><hr>
                      <p>ASMR形式で、全コードをタイピングしているので宜しければぜひ見てください!
                      </p>
                      <iframe width="560" style="width: 100%; aspect-ratio: 16/9;" height="315" src="https://www.youtube.com/embed/Q4DdGG6MPJk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

                      
                      <hr>
                      <h5>あとがき</h5>
                      <p>
                      <span class="marker2">下のコメント投稿欄で感想を共有していただけるととても嬉しいです！！</span></p>
                         
                    <div class="comment">   
                    <form id="form"></form>
                    <b></b><span class="info"></span>
                    <h4>コメント</h4>
                    <ol class="list"></ol>
  
                    
                  </div>

                  <!-- <a class="NextSite" href="../../Sub&Blog/blog.html">次の記事を読む</a> -->
              </div>
            </div>
          </section>
          
          
  
  
  
  
  
  
  
    <!-- footer -->
    <footer>
        <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="false">Tweet</a>
        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
        
        <div class="footer-col">
            <h3>事業内容</h3>
            <li class="white"><a href="../../index.html">トップページ</a></li>
            <li class="white"><a href="../subPage.html">サービスページ</a></li>
            <li class="white"><a href="../../ConceptPort/PortFolio.html">ポートフォリオサイト</a></li>
        </div>
  
        <div class="footer-col">
            <h3>企画</h3>
            <li class="white"><a href="../blog.html">ブログページ</a></li>
            <li class="white"><a href="#">月替わりゲームサイト</a></li>
            <li class="white"><a href="../../ContactForm/Contact.php">お問い合わせ</a></li>
        </div>
  
            <div class="subscribe">
                <a href="../../ContactForm/Contact.php" class="yellow">お問い合わせフォームへ</a>
            </div>
  
        <div class="copyright">
            <p>copyright @2023 All rights reserved @takaya</p>
            <div class="pro-links">
                <i class="fab fa-instagram"><a href="https://www.instagram.com/takaya3d/">Instagram</a></i>
            </div>
        </div>
  
    </footer>
  
    <div id="oneComment">このブログを見ればきっといい事があるに違いない - TKStudio </div>
  
  
  




    <!--最終更新日-->
    <script type="text/javascript">
        
        var weeks = new Array('日','月','火','水','木','金','土');
        
        var lastup = new Date(document.lastModified);
        
        var year = lastup.getYear(); // 年
        var month = lastup.getMonth() + 1; // 月
        var day = lastup.getDate(); // 日
        var week = weeks[ lastup.getDay() ]; // 曜日
        var hour = lastup.getHours(); // 時
        var min = lastup.getMinutes(); // 分
        var sec = lastup.getSeconds(); // 秒
        
        if(year < 2000) { year += 1900; }
        
        // 数値が1桁の場合、頭に0を付けて2桁で表示する指定
        if(month < 10) { month = "0" + month; }
        if(day < 10) { day = "0" + day; }
        if(hour < 10) { hour = "0" + hour; }
        if(min < 10) { min = "0" + min; }
        if(sec < 10) { sec = "0" + sec; }
        
        // 表示開始
        document.write('更新日時：<b>' + year + '年' + month + '月' + day + '日（' + week + '）');
        document.write(hour + '時' + min + '分' + sec + '秒</b>');
        // 表示終了
        
        // -->
        </script>
    
    <script src="./assets/commentScript.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>
      hljs.highlightAll();
    </script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="https://rawgit.com/kimmobrunfeldt/progressbar.js/master/dist/progressbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bxslider/4.2.15/jquery.bxslider.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/scrollgress/2.0.0/scrollgress.min.js"></script>
    
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js"></script>
    
    <!-- <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.clouds.min.js"></script> -->
   

</body>
</html>






